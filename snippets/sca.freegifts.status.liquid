<script data-cfasync="false" type="text/javascript">
  /* Smart Ecommerce App (SEA Inc)
   * http://www.secomapp.com
   * Do not reuse those source codes if don't have permission of us.
   * */
  {%raw%}
  (function(){if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}"function"!==typeof Object.create&&(Object.create=function(e){function t(){}t.prototype=e;return new t});if(!Object.keys){Object.keys=function(e){var t=[],i;for(i in e){if(Object.prototype.hasOwnProperty.call(e,i)){t.push(i)}}return t}}if(!String.prototype.endsWith){Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var i=this.toString();if(t===undefined||t>i.length){t=i.length}t-=e.length;var r=i.indexOf(e,t);return r!==-1&&r===t},writable:true,enumerable:true,configurable:true})}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var i;if(this==null){throw new TypeError('"this" is null or not defined')}var r=Object(this);var o=r.length>>>0;if(o===0){return-1}var n=+t||0;if(Math.abs(n)===Infinity){n=0}if(n>=o){return-1}i=Math.max(n>=0?n:o-Math.abs(n),0);while(i<o){if(i in r&&r[i]===e){return i}i++}return-1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(e,t){var i,r;if(this==null){throw new TypeError(" this is null or not defined")}var o=Object(this);var n=o.length>>>0;if(typeof e!=="function"){throw new TypeError(e+" is not a function")}if(arguments.length>1){i=t}r=0;while(r<n){var a;if(r in o){a=o[r];e.call(i,a,r,o)}r++}}}console=console||{};console.log=console.log||function(){};if(typeof Shopify==="undefined"){Shopify={}}if(typeof Shopify.onError!=="function"){Shopify.onError=function(){}}if(typeof SECOMAPP==="undefined"){SECOMAPP={}}SECOMAPP.removeGiftsVariant=function(e){setTimeout(function(){try{e("select option").not(".sca-fg-cart-item select option").filter(function(){var t=e(this).val();var i=e(this).text();if(i.indexOf(" - ")!==-1){i=i.slice(0,i.indexOf(" - "))}var r=[];if(i.indexOf(" / ")!==-1){r=i.split(" / ");i=r[r.length-1]}if(typeof SECOMAPP.gifts_list_avai!=="undefined"&&typeof SECOMAPP.gifts_list_avai[t]!=="undefined"||i.endsWith("% off)")){e("select option").not(".sca-fg-cart-item select option").filter(function(){var r=e(this).val();var o=e(this).text();return o.endsWith(i)||r==t||o.endsWith("% off)")}).remove();e(".dropdown *,ul li,label,div").filter(function(){var r=e(this).html(),o=e(this).data("value");return r&&r.endsWith(i)||r&&r.endsWith("% off)")||o==t}).remove();return true}return false})}catch(e){console.log(e)}},500)};SECOMAPP.formatMoney=function(e,t){if(typeof e=="string"){e=e.replace(".","")}var i="";var r=typeof Shopify!=="undefined"&&typeof Shopify.money_format!=="undefined"?Shopify.money_format:"{{amount}}";var o=/\{\{\s*(\w+)\s*\}\}/;var n=t||(typeof this.fgsettings.sca_currency_format==="string"&&this.fgsettings.sca_currency_format.indexOf("amount")>-1?this.fgsettings.sca_currency_format:null)||r;if(n.indexOf("amount_no_decimals_no_comma_separator")<0&&n.indexOf("amount_no_comma_separator_up_cents")<0&&n.indexOf("amount_up_cents")<0&&typeof Shopify.formatMoney==="function"){return Shopify.formatMoney(e,n)}function a(e,t){return typeof e=="undefined"?t:e}function f(e,t,i,r,o,n){t=a(t,2);i=a(i,",");r=a(r,".");if(isNaN(e)||e==null){return 0}e=(e/100).toFixed(t);var f=e.split("."),c=f[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+i),s=f[1]?!o||!n?r+f[1]:o+f[1]+n:"";return c+s}switch(n.match(o)[1]){case"amount":i=f(e,2);break;case"amount_no_decimals":i=f(e,0);break;case"amount_with_comma_separator":i=f(e,2,",",".");break;case"amount_no_decimals_with_comma_separator":i=f(e,0,",",".");break;case"amount_no_decimals_no_comma_separator":i=f(e,0,"","");break;case"amount_up_cents":i=f(e,2,",","","<sup>","</sup>");break;case"amount_no_comma_separator_up_cents":i=f(e,2,"","","<sup>","</sup>");break}return n.replace(o,i)};SECOMAPP.setCookie=function(e,t,i,r,o){var n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3+r*60*1e3);var a="expires="+n.toUTCString();document.cookie=e+"="+t+";"+a+(o?";path="+o:";path=/")};SECOMAPP.getCookie=function(e){var t=e+"=";var i=document.cookie.split(";");for(var r=0;r<i.length;r++){var o=i[r];while(o.charAt(0)==" ")o=o.substring(1);if(o.indexOf(t)==0)return o.substring(t.length,o.length)}return""};SECOMAPP.getQueryString=function(){var e={};var t=window.location.search.substring(1);var i=t.split("&");for(var r=0;r<i.length;r++){var o=i[r].split("=");if(typeof e[o[0]]==="undefined"){e[o[0]]=decodeURIComponent(o[1])}else if(typeof e[o[0]]==="string"){var n=[e[o[0]],decodeURIComponent(o[1])];e[o[0]]=n}else{e[o[0]].push(decodeURIComponent(o[1]))}}return e};SECOMAPP.freegifts_product_json=function(e){if(e){for(var t=0;t<e.options.length;t++){option=e.options[t];if(option.values)for(var i=0;i<option.values.length;i++){if(option.values[i].endsWith("(Freegifts)")||option.values[i].endsWith("% off)")){option.values.splice(i,1);i--}}}for(var r=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o=e.price,n=e.price_max,a=e.price_min,f=e.compare_at_price,c=e.compare_at_price_max,s=e.compare_at_price_min,t=0;t<e.variants.length;t++){var i=e.variants[t],p=!i.option3?!i.option2?i.option1:i.option2:i.option3;"undefined"!=typeof SECOMAPP&&"undefined"!=typeof SECOMAPP.gifts_list_avai&&!r(SECOMAPP.gifts_list_avai)&&"undefined"!=typeof SECOMAPP.gifts_list_avai[i.id]||p.endsWith("(Freegifts)")||p.endsWith("% off)")?(e.variants.splice(t,1),t-=1):(n>=i.price&&(n=i.price,o=i.price),a<=i.price&&(a=i.price),i.compare_at_price&&(c>=i.compare_at_price&&(c=i.compare_at_price,f=i.compare_at_price),s<=i.compare_at_price&&(s=i.compare_at_price)),1==i.available&&(e.available=!0))}e.price=o,e.price_max=a,e.price_min=n,e.compare_at_price=f,e.compare_at_price_max=s,e.compare_at_price_min=c,e.price_varies=a>n?!0:!1,e.compare_at_price_varies=s>c?!0:!1}return e};SECOMAPP.fg_codes=[];if(SECOMAPP.getCookie("sca_fg_codes")!==""){SECOMAPP.fg_codes=JSON.parse(SECOMAPP.getCookie("sca_fg_codes"))}var e=SECOMAPP.getQueryString();if(e["freegifts_code"]&&SECOMAPP.fg_codes.indexOf(e["freegifts_code"])===-1){if(typeof SECOMAPP.activateOnlyOnePromoCode!=="undefined"&&SECOMAPP.activateOnlyOnePromoCode===true){SECOMAPP.fg_codes=[]}SECOMAPP.fg_codes.push(e["freegifts_code"]);SECOMAPP.setCookie("sca_fg_codes",JSON.stringify(SECOMAPP.fg_codes))}})();
  {%endraw%}
  ;SECOMAPP.customer={};SECOMAPP.customer.orders=[];SECOMAPP.customer.freegifts=[];{% for order in customer.orders %}SECOMAPP.customer.orders.push({"financial_status": {{order.financial_status|json}},"total_price": {{order.total_price|json}},"created_at": "{{order.created_at}}" });{% for line_item in order.line_items %}{%if line_item.variant.metafields.secomapp.freegifts or line_item.variant.title contains '(Freegifts)' or line_item.variant.title contains '% off)' %}SECOMAPP.customer.freegifts.push({{line_item.variant.id}});{%endif%}{% endfor %}{% endfor %};{{customer.orders|json}};SECOMAPP.customer.email={{customer.email | json}};SECOMAPP.customer.first_name={{customer.first_name | json}};SECOMAPP.customer.last_name={{customer.last_name | json}};SECOMAPP.customer.tags={{customer.tags | json}};SECOMAPP.customer.orders_count={{customer.orders_count | json}};SECOMAPP.customer.total_spent={{customer.total_spent | json}};{%if customer.last_order.financial_status =='paid' %}SECOMAPP.customer.last_order='{{customer.last_order.created_at}}';SECOMAPP.customer.last_total={{customer.last_order.total_price | json}};{% endif %}{% assign foundFreeGift=false %}{% if template contains 'cart' %}SECOMAPP.shopcart={{ cart | json }};var cic=[];{% for item in cart.items %}{%if item.product.collections%}{% capture results %}[{% for collection in item.product.collections %}{{ collection.id | json }}{% unless forloop.last %},{% endunless %}{% endfor %}]{% endcapture %}cic[{{item.id}}]={{results}};{%endif%}{% endfor %}SECOMAPP.cart_item_collection = cic;{% endif %}
</script>